---
import Layout from '../layouts/MainLayout.astro';

// Salient demo images with exact dimensions and sizing
const salientImages = [
  { src: "fashion-portrait-450x600.jpg", size: "regular", width: 450, height: 600 },
  { src: "swimming-pool-900x600.jpg", size: "wide", width: 900, height: 600 },
  { src: "restaurant-scene-450x600.jpg", size: "regular", width: 450, height: 600 },
  { src: "featured-portrait-1-900x1200.jpg", size: "wide_tall", width: 900, height: 1200 },
  { src: "abstract-art-450x600.jpg", size: "regular", width: 450, height: 600 },
  { src: "nature-landscape-900x600.jpg", size: "wide", width: 900, height: 600 },
  { src: "featured-portrait-2-900x1200.jpg", size: "wide_tall", width: 900, height: 1200 },
  // Add more for variety
  { src: "creative-portrait-450x600.jpg", size: "regular", width: 450, height: 600 },
  { src: "high-end-fashion-450x600.jpg", size: "regular", width: 450, height: 600 },
  { src: "lifestyle-portrait-450x600.jpg", size: "regular", width: 450, height: 600 },
  { src: "portrait-session-450x600.jpg", size: "regular", width: 450, height: 600 },
  { src: "restaurant-week-450x600.jpg", size: "regular", width: 450, height: 600 },
  { src: "urban-lifestyle-450x600.jpg", size: "regular", width: 450, height: 600 },
];
---

<Layout title="Salient Photography Demo - Isotope Masonry">
  <style>
    /* Reset and Base Styles */
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: #fff;
    }
    
    /* Demo Header */
    .demo-header {
      text-align: center;
      padding: 80px 20px 60px;
      background: #fafafa;
    }
    
    .demo-header h1 {
      font-size: 42px;
      font-weight: 300;
      letter-spacing: -2px;
      margin: 0 0 10px 0;
    }
    
    .demo-header p {
      color: #666;
      font-size: 18px;
      margin: 0;
    }
    
    /* EXACT SALIENT PORTFOLIO MASONRY STYLES */
    
    /* Container */
    .portfolio-wrap {
      position: relative;
      margin: 0 auto;
      padding: 0;
    }
    
    /* Masonry Container - Salient Structure */
    .portfolio-items {
      position: relative;
      width: 100%;
      margin: 0 auto;
      padding: 0;
      transition: opacity 0.3s ease;
    }
    
    .portfolio-items.masonry-items {
      opacity: 0;
    }
    
    .portfolio-items.masonry-items.isotope-initialized {
      opacity: 1;
    }
    
    /* Individual Items - EXACT Salient Sizing */
    .portfolio-items .col {
      position: absolute;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    
    /* Elastic Portfolio Item Base */
    .portfolio-items .col.elastic-portfolio-item {
      width: 20%; /* Base width for 5 columns */
    }
    
    /* Photography-Based Sizing - EXACT from Salient */
    .portfolio-items .col.elastic-portfolio-item.regular {
      width: 20%;
      /* Height handled by image aspect ratio */
    }
    
    .portfolio-items .col.elastic-portfolio-item.wide {
      width: 40%; /* Double width */
    }
    
    .portfolio-items .col.elastic-portfolio-item.wide_tall {
      width: 40%; /* Double width */
      /* Height is naturally double due to image */
    }
    
    /* Gutter Styles */
    .portfolio-items[data-gutter="default"] .col {
      padding: 8px;
    }
    
    .portfolio-items[data-gutter="1px"] .col {
      padding: 0.5px;
    }
    
    .portfolio-items[data-gutter="2px"] .col {
      padding: 1px;
    }
    
    .portfolio-items[data-gutter="3px"] .col {
      padding: 1.5px;
    }
    
    /* Inner Wrap for Padding */
    .portfolio-items .col .inner-wrap {
      position: relative;
      overflow: hidden;
      background: #000;
    }
    
    /* Work Item Container */
    .portfolio-items .col .work-item {
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    
    /* Image Styles */
    .portfolio-items .col img {
      width: 100%;
      height: auto;
      display: block;
      transition: transform 0.45s cubic-bezier(0.3, 0.1, 0.3, 1);
    }
    
    /* Hover Effects - Salient Style */
    .portfolio-items .col:hover img {
      transform: scale(1.07);
    }
    
    /* Work Info Overlay */
    .portfolio-items .work-info-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0);
      transition: background 0.45s ease;
      pointer-events: none;
    }
    
    .portfolio-items .col:hover .work-info-bg {
      background: rgba(0, 0, 0, 0.4);
    }
    
    .portfolio-items .work-info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 25px;
      color: #fff;
      transform: translateY(100%);
      transition: transform 0.45s cubic-bezier(0.3, 0.1, 0.3, 1);
    }
    
    .portfolio-items .col:hover .work-info {
      transform: translateY(0);
    }
    
    .portfolio-items .work-info h3 {
      margin: 0 0 5px 0;
      font-size: 20px;
      font-weight: 400;
      letter-spacing: -0.5px;
    }
    
    .portfolio-items .work-info p {
      margin: 0;
      font-size: 13px;
      opacity: 0.7;
    }
    
    /* Loading State */
    .portfolio-loading {
      text-align: center;
      padding: 60px;
      color: #999;
    }
    
    /* Responsive Breakpoints - Salient Exact */
    @media only screen and (max-width: 1600px) {
      .portfolio-items .col.elastic-portfolio-item.regular {
        width: 25%;
      }
      .portfolio-items .col.elastic-portfolio-item.wide,
      .portfolio-items .col.elastic-portfolio-item.wide_tall {
        width: 50%;
      }
    }
    
    @media only screen and (max-width: 1300px) {
      .portfolio-items .col.elastic-portfolio-item.regular {
        width: 33.333%;
      }
      .portfolio-items .col.elastic-portfolio-item.wide,
      .portfolio-items .col.elastic-portfolio-item.wide_tall {
        width: 66.666%;
      }
    }
    
    @media only screen and (max-width: 990px) {
      .portfolio-items .col.elastic-portfolio-item.regular,
      .portfolio-items .col.elastic-portfolio-item.wide,
      .portfolio-items .col.elastic-portfolio-item.wide_tall {
        width: 50%;
      }
    }
    
    @media only screen and (max-width: 690px) {
      .portfolio-items .col.elastic-portfolio-item.regular,
      .portfolio-items .col.elastic-portfolio-item.wide,
      .portfolio-items .col.elastic-portfolio-item.wide_tall {
        width: 100%;
      }
    }
    
    /* Animation */
    @keyframes portfolioFadeIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .portfolio-items .col .inner-wrap {
      animation: portfolioFadeIn 0.6s ease forwards;
      opacity: 0;
    }
    
    .portfolio-items.animated-in .col .inner-wrap {
      opacity: 1;
    }
    
    /* Staggered animation with 85ms delay for Photography mode */
    .portfolio-items .col:nth-child(1) .inner-wrap { animation-delay: 0ms; }
    .portfolio-items .col:nth-child(2) .inner-wrap { animation-delay: 85ms; }
    .portfolio-items .col:nth-child(3) .inner-wrap { animation-delay: 170ms; }
    .portfolio-items .col:nth-child(4) .inner-wrap { animation-delay: 255ms; }
    .portfolio-items .col:nth-child(5) .inner-wrap { animation-delay: 340ms; }
    .portfolio-items .col:nth-child(6) .inner-wrap { animation-delay: 425ms; }
    .portfolio-items .col:nth-child(7) .inner-wrap { animation-delay: 510ms; }
    .portfolio-items .col:nth-child(8) .inner-wrap { animation-delay: 595ms; }
  </style>

  <div class="demo-header">
    <h1>Salient Photography Masonry</h1>
    <p>Exact replication with Isotope.js</p>
  </div>

  <div class="portfolio-wrap">
    <div class="portfolio-loading" id="portfolio-loading">Initializing masonry...</div>
    
    <div class="portfolio-items masonry-items" 
         data-masonry-type="photography" 
         data-gutter="3px"
         data-ps="6"
         style="position: relative;">
      {salientImages.map((image, index) => (
        <div class={`col elastic-portfolio-item ${image.size}`} 
             data-delay-amount={index}>
          <div class="inner-wrap">
            <div class="work-item">
              <img 
                src={`/salient-demo-images/${image.src}`}
                width={image.width}
                height={image.height}
                alt=""
              />
              <div class="work-info-bg"></div>
              <div class="work-info">
                <h3>Project Title</h3>
                <p>{image.size === 'regular' ? 'Portrait' : 
                   image.size === 'wide' ? 'Landscape' : 'Featured'}</p>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>

  <!-- Load Isotope from CDN -->
  <script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>
  <script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const container = document.querySelector('.portfolio-items');
      const loading = document.getElementById('portfolio-loading');
      
      // Wait for images to load
      imagesLoaded(container, function() {
        // Hide loading
        loading.style.display = 'none';
        
        // Initialize Isotope with Salient settings
        const iso = new Isotope(container, {
          itemSelector: '.col',
          layoutMode: 'masonry',
          masonry: {
            columnWidth: '.col.regular',
            gutter: 0
          },
          percentPosition: false,
          transitionDuration: '0.3s',
          hiddenStyle: {
            opacity: 0,
            transform: 'translateY(30px)'
          },
          visibleStyle: {
            opacity: 1,
            transform: 'translateY(0)'
          }
        });
        
        // Add class to show it's initialized
        container.classList.add('isotope-initialized');
        
        // Trigger animation
        setTimeout(() => {
          container.classList.add('animated-in');
        }, 100);
        
        // Handle window resize
        let resizeTimer;
        window.addEventListener('resize', function() {
          clearTimeout(resizeTimer);
          resizeTimer = setTimeout(function() {
            iso.layout();
          }, 250);
        });
        
        console.log('Salient Photography Masonry initialized with Isotope.js');
      });
    });
  </script>
</Layout>